<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskGram - TON Rewards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #0088cc 0%, #005580 50%, #003d5c 100%);
        }
        
        /* TON Brand Colors */
        .ton-primary { background: linear-gradient(135deg, #0088cc 0%, #005580 100%); }
        .ton-secondary { background: linear-gradient(135deg, #00a8ff 0%, #0088cc 100%); }
        .ton-accent { background: linear-gradient(135deg, #40e0d0 0%, #00bcd4 100%); }
        .ton-dark { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); }
        
        /* Animations */
        .fade-in { animation: fadeIn 0.6s ease-out; }
        .slide-up { animation: slideUp 0.5s ease-out; }
        .bounce-in { animation: bounceIn 0.8s ease-out; }
        .pulse-glow { animation: pulseGlow 2s infinite; }
        .float { animation: float 3s ease-in-out infinite; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(0, 136, 204, 0.3); }
            50% { box-shadow: 0 0 30px rgba(0, 136, 204, 0.6); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        /* Glass morphism effects */
        .glass { 
            backdrop-filter: blur(20px); 
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .glass-dark { 
            backdrop-filter: blur(20px); 
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(255, 255, 255, 0.1); }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, #0088cc, #00a8ff); 
            border-radius: 3px; 
        }
        
        /* Task cards */
        .task-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(0);
        }
        .task-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 136, 204, 0.3);
        }
        
        /* Button effects */
        .btn-ton {
            background: linear-gradient(135deg, #0088cc 0%, #00a8ff 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .btn-ton:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 136, 204, 0.4);
        }
        .btn-ton:active {
            transform: translateY(0);
        }
        
        /* TON Icon */
        .ton-icon {
            display: inline-block;
            width: 1.2em;
            height: 1.2em;
            background: linear-gradient(135deg, #0088cc, #00a8ff);
            border-radius: 50%;
            position: relative;
            vertical-align: middle;
        }
        .ton-icon::before {
            content: "â—†";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 0.8em;
        }
        
        /* Loading animation */
        .loading-spinner {
            border: 3px solid rgba(0, 136, 204, 0.3);
            border-top: 3px solid #0088cc;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Tab active state */
        .tab-active {
            background: linear-gradient(135deg, #0088cc, #00a8ff);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
        }
        
        /* Balance cards */
        .balance-card {
            background: linear-gradient(135deg, #0088cc 0%, #005580 100%);
            position: relative;
            overflow: hidden;
        }
        .balance-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        /* Conversion card */
        .conversion-card {
            background: linear-gradient(135deg, #40e0d0 0%, #00bcd4 100%);
        }
        
        /* Responsive design improvements */
        @media (max-width: 640px) {
            .task-card { margin: 0.5rem 0; }
            .balance-card { margin: 1rem 0; }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="fixed inset-0 ton-primary flex items-center justify-center z-50">
        <div class="text-center text-white fade-in">
            <div class="loading-spinner w-16 h-16 mx-auto mb-6"></div>
            <div class="ton-icon float text-6xl mb-4"></div>
            <h2 class="text-2xl font-bold mb-2">TaskGram</h2>
            <p class="text-lg opacity-90">Gana TON completando tareas</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden min-h-screen">
        <!-- Header -->
        <header class="ton-primary text-white p-4 sticky top-0 z-40 glass-dark">
            <div class="flex items-center justify-between fade-in">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center pulse-glow">
                        <div class="ton-icon text-2xl"></div>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">TaskGram</h1>
                        <p class="text-sm opacity-80" id="userGreeting">Â¡Bienvenido!</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-xs opacity-80">Balance</div>
                    <div class="font-bold text-lg" id="headerBalance">0 ðŸ’Ž</div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="bg-white bg-opacity-10 backdrop-blur-lg sticky top-20 z-30 px-2">
            <div class="flex overflow-x-auto space-x-2 py-3">
                <button class="tab-btn flex-shrink-0 py-2 px-4 rounded-lg font-medium text-white whitespace-nowrap tab-active transition-all duration-300" data-tab="tasks">
                    <i class="fas fa-tasks mr-2"></i>Tareas
                </button>
                <button class="tab-btn flex-shrink-0 py-2 px-4 rounded-lg font-medium text-white whitespace-nowrap transition-all duration-300" data-tab="missions">
                    <i class="fas fa-rocket mr-2"></i>Misiones
                </button>
                <button class="tab-btn flex-shrink-0 py-2 px-4 rounded-lg font-medium text-white whitespace-nowrap transition-all duration-300" data-tab="interventions">
                    <i class="fas fa-tools mr-2"></i>Soporte
                </button>
                <button class="tab-btn flex-shrink-0 py-2 px-4 rounded-lg font-medium text-white whitespace-nowrap transition-all duration-300" data-tab="account">
                    <i class="fas fa-wallet mr-2"></i>Cuenta
                </button>
            </div>
        </nav>

        <!-- Content Sections -->
        <main class="p-4 pb-20">
            <!-- Tasks Section -->
            <section id="tasks" class="tab-content fade-in">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-white mb-2">Tareas Disponibles</h2>
                    <p class="text-blue-100">Completa tareas y gana ðŸ’Ž</p>
                </div>
                <div id="tasksList" class="space-y-4">
                    <!-- Tasks will be loaded here -->
                </div>
            </section>

            <!-- Missions Section -->
            <section id="missions" class="tab-content hidden fade-in">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-white mb-2">Misiones Especiales</h2>
                    <p class="text-blue-100">Recompensas premium</p>
                </div>
                <div id="missionsList" class="space-y-4">
                    <!-- Missions will be loaded here -->
                </div>
            </section>

            <!-- Interventions Section -->
            <section id="interventions" class="tab-content hidden fade-in">
                <div class="mb-6">
                    <h2 class="text-2xl font-bold text-white mb-2">Soporte</h2>
                    <p class="text-blue-100">Ayuda y reportes</p>
                </div>
                <div id="interventionsList" class="space-y-4">
                    <!-- Interventions will be loaded here -->
                </div>
            </section>

            <!-- Account Section -->
            <section id="account" class="tab-content hidden fade-in">
                <!-- Balance Card -->
                <div class="balance-card rounded-2xl p-6 text-white mb-6 slide-up">
                    <div class="flex items-center justify-between mb-6 relative z-10">
                        <h3 class="text-xl font-bold">Mi Balance</h3>
                        <i class="fas fa-wallet text-3xl opacity-80"></i>
                    </div>
                    <div class="grid grid-cols-2 gap-6 relative z-10">
                        <div class="text-center">
                            <div class="text-sm opacity-80 mb-1">Gemas</div>
                            <div class="text-3xl font-bold" id="gemsBalance">0 ðŸ’Ž</div>
                        </div>
                        <div class="text-center">
                            <div class="text-sm opacity-80 mb-1">TON</div>
                            <div class="text-3xl font-bold flex items-center justify-center" id="tonBalance">
                                0 <span class="ton-icon ml-2"></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Conversion Card -->
                <div class="conversion-card rounded-2xl p-6 text-white mb-6 bounce-in">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        ConversiÃ³n ðŸ’Ž â†’ <span class="ton-icon mx-2"></span>
                    </h3>
                    <div class="glass rounded-xl p-6 mb-6">
                        <div class="text-center">
                            <div class="text-4xl font-bold mb-2">100,000 ðŸ’Ž</div>
                            <div class="text-2xl opacity-80 my-3">=</div>
                            <div class="text-4xl font-bold flex items-center justify-center">
                                1 <span class="ton-icon ml-2 text-3xl"></span>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <input type="number" id="convertAmount" placeholder="Cantidad de ðŸ’Ž" 
                               class="w-full p-4 rounded-xl bg-white bg-opacity-20 placeholder-white placeholder-opacity-70 text-white text-lg border-0 focus:ring-2 focus:ring-white focus:ring-opacity-50">
                        <button id="convertBtn" class="w-full btn-ton text-white font-bold py-4 rounded-xl text-lg">
                            <i class="fas fa-exchange-alt mr-2"></i>Convertir
                        </button>
                    </div>
                </div>

                <!-- Wallet Connection -->
                <div class="glass rounded-2xl p-6 text-white mb-6">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-link mr-3"></i>Billetera
                    </h3>
                    <div id="walletStatus" class="mb-4">
                        <div class="text-blue-200">No conectada</div>
                    </div>
                    <button id="connectWalletBtn" class="w-full btn-ton text-white font-bold py-4 rounded-xl">
                        <i class="fas fa-wallet mr-2"></i>Conectar TonKeeper
                    </button>
                </div>

                <!-- Actions -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <button id="depositBtn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-4 rounded-xl transition-all duration-300 hover:scale-105">
                        <i class="fas fa-plus mr-2"></i>Depositar
                    </button>
                    <button id="withdrawBtn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-4 rounded-xl transition-all duration-300 hover:scale-105">
                        <i class="fas fa-minus mr-2"></i>Retirar
                    </button>
                </div>

                <!-- Stats -->
                <div class="glass rounded-2xl p-6 text-white mb-6">
                    <h3 class="text-xl font-bold mb-4">EstadÃ­sticas</h3>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-yellow-300" id="totalEarned">0</div>
                            <div class="text-sm text-blue-200">Total Ganado</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-green-300" id="referralsCount">0</div>
                            <div class="text-sm text-blue-200">Referidos</div>
                        </div>
                    </div>
                </div>

                <!-- Referral Link -->
                <div class="glass rounded-2xl p-6 text-white mb-6">
                    <h3 class="text-xl font-bold mb-4">Enlace de Referido</h3>
                    <div class="flex space-x-3">
                        <input type="text" id="referralLink" readonly 
                               class="flex-1 p-3 rounded-xl bg-white bg-opacity-20 text-white border-0">
                        <button id="copyReferralBtn" class="btn-ton px-6 py-3 rounded-xl text-white">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>

                <!-- Transaction History -->
                <div class="glass rounded-2xl p-6 text-white">
                    <h3 class="text-xl font-bold mb-4">Historial</h3>
                    <div id="transactionsList" class="space-y-3">
                        <!-- Transactions will be loaded here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Task Modal -->
    <div id="taskModal" class="fixed inset-0 bg-black bg-opacity-60 hidden z-50 flex items-center justify-center p-4">
        <div class="glass rounded-2xl max-w-md w-full p-6 text-white slide-up">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-bold" id="modalTaskTitle">TÃ­tulo</h3>
                <button id="closeModal" class="text-white hover:text-red-300 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            <div class="mb-4">
                <p class="text-blue-100" id="modalTaskDescription">DescripciÃ³n</p>
            </div>
            <div class="mb-6">
                <div class="flex items-center justify-between text-sm text-blue-200 mb-2">
                    <span>Recompensa</span>
                    <span id="modalTaskReward" class="text-yellow-300 font-bold">5000 ðŸ’Ž</span>
                </div>
            </div>
            <div class="flex space-x-3">
                <button id="openTaskBtn" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all">
                    <i class="fas fa-external-link-alt mr-2"></i>Abrir
                </button>
                <button id="completeTaskBtn" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl transition-all">
                    <i class="fas fa-check mr-2"></i>Completar
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="fixed top-4 right-4 px-6 py-4 rounded-xl shadow-lg transform translate-x-full transition-all duration-300 z-50">
        <div class="flex items-center text-white">
            <i class="fas fa-check-circle mr-3"></i>
            <span id="toastMessage">Mensaje</span>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
